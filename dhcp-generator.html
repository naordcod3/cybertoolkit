<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DHCP Pool Generator</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://kit.fontawesome.com/a076d05399.js" crossorigin="anonymous"></script>
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism-tomorrow.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
</head>
<body class="bg-black text-green-400 font-mono relative">
    <canvas id="matrixCanvas" class="absolute top-0 left-0 w-full h-full opacity-20"></canvas>

  <!--navigation bar (from nav.html)-->
  <div id="nav-placeholder"></div>

  <script>
      // Load navigation bar from nav.html
      fetch("nav.html")
          .then(response => response.text())
          .then(data => {
              document.getElementById("nav-placeholder").innerHTML = data;
          });
  </script>



<script>
    document.addEventListener("DOMContentLoaded", function () {
        const dropdownBtn = document.getElementById("networkingDropdownBtn");
        const dropdownMenu = document.getElementById("networkingDropdown");

        // Toggle dropdown on button click
        dropdownBtn.addEventListener("click", function () {
            dropdownMenu.classList.toggle("hidden");
        });

        // Close dropdown when clicking outside
        document.addEventListener("click", function (event) {
            if (!dropdownBtn.contains(event.target) && !dropdownMenu.contains(event.target)) {
                dropdownMenu.classList.add("hidden");
            }
        });
    });
</script>


    <section class="text-center mt-10 relative z-10">
        <h1 class="text-3xl font-bold text-green-300">DHCP Pool Generator</h1>
        <p class="text-green-200 mt-2">Generate **Cisco CLI commands for DHCP Pools** dynamically.</p>

        <!-- DHCP Pool Configuration -->
        <div class="mt-6">
            <h2 class="text-xl text-green-300">DHCP Pool Configuration</h2>
            <div id="dhcp-container"></div>
            <button id="addDHCPPool" class="mt-4 bg-green-600 hover:bg-green-400 text-black font-bold py-2 px-4 rounded">
                + Add DHCP Pool
            </button>
        </div>

        <button id="generateDHCPCLI" class="mt-6 bg-green-600 hover:bg-green-400 text-black font-bold py-2 px-4 rounded">
            Generate DHCP CLI
        </button>

        <div class="mt-6 bg-black p-4 border border-green-400 text-left text-green-200 rounded">
            <h3 class="text-green-300 font-bold">Generated DHCP Configuration</h3>
            <pre id="dhcpOutput" class="language-bash"></pre>
            <button id="copyDHCPCLI" class="mt-4 bg-green-700 hover:bg-green-500 text-black font-bold py-1 px-3 rounded">
                ðŸ“‹ Copy to Clipboard
            </button>
        </div>
    </section>

    <script>
        function convertPrefixToSubnet(prefix) {
            const mapping = {
                "/8": "255.0.0.0", "/16": "255.255.0.0", "/17": "255.255.128.0",
                "/18": "255.255.192.0", "/19": "255.255.224.0", "/24": "255.255.255.0",
                "/27": "255.255.255.224"
            };
            return mapping[prefix] || "255.255.255.0"; 
        }

        function calculateDefaultRouter(network) {
            let parts = network.split(".");
            return `${parts[0]}.${parts[1]}.${parts[2]}.${parseInt(parts[3]) + 1}`;
        }

        function copyCLI(outputId) {
            navigator.clipboard.writeText(document.getElementById(outputId).textContent);
            alert("CLI commands copied to clipboard!");
        }

        document.getElementById("addDHCPPool").addEventListener("click", function () {
            let container = document.getElementById("dhcp-container");
            let newPool = document.createElement("div");
            newPool.className = "dhcp-entry mt-2 flex space-x-2";
            newPool.innerHTML = `
                <input type="text" class="dhcp-name bg-black border border-green-400 text-green-300 p-2" placeholder="Pool Name">
                <input type="text" class="dhcp-network bg-black border border-green-400 text-green-300 p-2" placeholder="Network (e.g., 192.168.1.0)">
                <input type="text" class="dhcp-prefix bg-black border border-green-400 text-green-300 p-2" placeholder="Prefix (e.g., /24)">
            `;
            container.appendChild(newPool);
        });

        document.getElementById("generateDHCPCLI").addEventListener("click", function () {
            let output = "enable\nconfigure terminal\n";
            document.querySelectorAll(".dhcp-entry").forEach(entry => {
                let poolName = entry.querySelector(".dhcp-name").value.trim();
                let network = entry.querySelector(".dhcp-network").value.trim();
                let prefix = entry.querySelector(".dhcp-prefix").value.trim();

                if (poolName && network && prefix) {
                    let subnetMask = convertPrefixToSubnet(prefix);
                    let gatewayIP = calculateDefaultRouter(network);

                    output += `ip dhcp pool ${poolName}\n network ${network} ${subnetMask}\n default-router ${gatewayIP}\n dns-server 8.8.8.8\n exit\n\n`;
                }
            });

            document.getElementById("dhcpOutput").textContent = output;
            Prism.highlightAll();
        });

        document.getElementById("copyDHCPCLI").addEventListener("click", function () {
            copyCLI('dhcpOutput');
        });
    </script>

</body>
</html>
